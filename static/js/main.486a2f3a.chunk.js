(window["webpackJsonpreact_redux_router_list-of-posts"]=window["webpackJsonpreact_redux_router_list-of-posts"]||[]).push([[0],{32:function(t,e,n){t.exports=n(52)},41:function(t,e,n){},44:function(t,e,n){},45:function(t,e,n){},46:function(t,e,n){},47:function(t,e,n){},48:function(t,e,n){},49:function(t,e,n){},50:function(t,e,n){},51:function(t,e,n){},52:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),o=n(21),c=n.n(o),s=n(16),i=n(3),u=n(20),p=n(30),l=(n(41),function(){return a.a.createElement("nav",{className:"nav"},a.a.createElement("ul",{className:"nav__list"},a.a.createElement("li",null,a.a.createElement(s.b,{className:"nav__item",activeClassName:"nav__item--active",to:"/",exact:!0},"Posts list")),a.a.createElement("li",null,a.a.createElement(s.b,{className:"nav__item",activeClassName:"nav__item--active",to:"/new-post",exact:!0},"New post"))))}),m=n(18),f=n(2),d=n.n(f),b=n(14),h=n(7),O=n(8),y=n(10),E=n(9),v=n(11),_="https://simple-blog-api.crew.red",j=function(t){return{type:"POSTS_RECEIVED",posts:t}},g=function(t){return{type:"POST_RECEIVED",post:t}},w=function(t){return{type:"NEW_POST_RECEIVED",post:t}},P=function(){return{type:"NEW_COMMENT_RECEIVED"}},N=function(){return{type:"POST_UPDATED"}},C=(n(44),function(){return a.a.createElement("div",{className:"load"},a.a.createElement("div",{className:"load__line load__line-first"}),a.a.createElement("div",{className:"load__line load__line-second"}),a.a.createElement("div",{className:"load__line load__line-third"}))}),D=(n(45),n(5));n(46);function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(n,!0).forEach(function(e){Object(D.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var T=function(t){function e(){var t,n;Object(h.a)(this,e);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(y.a)(this,(t=Object(E.a)(e)).call.apply(t,[this].concat(a)))).state={commentMap:{postId:"",body:"",id:""}},n.handleFieldChange=function(t){var e=t.target,r=e.name,a=e.value,o=n.props.postId;n.setState(function(t){var e;return{commentMap:k({},t.commentMap,(e={},Object(D.a)(e,r,a),Object(D.a)(e,"postId",o),e))}})},n.handleFormSubmit=function(t){t.preventDefault();var e=n.state.commentMap,r=n.props.postComment;e.body&&(r(e),n.setState(function(t){return{commentMap:k({},t.commentMap,{body:"",id:""})}}))},n}return Object(v.a)(e,t),Object(O.a)(e,[{key:"render",value:function(){var t=this.props.comments,e=this.state.commentMap.body;return a.a.createElement(a.a.Fragment,null,a.a.createElement("form",{className:"post__form",onSubmit:this.handleFormSubmit},a.a.createElement("input",{value:e,name:"body",className:"post__input",placeholder:"Write a comment...",onChange:this.handleFieldChange})),t&&0!==t.length?a.a.createElement("ul",{className:"post__comments"},t.map(function(t){return a.a.createElement("li",{className:"post__comment",key:t.id},t.body)})):null)}}]),e}(a.a.Component),x=Object(i.b)(null,function(t){return{postComment:function(e){return t(function(t){return function(){var e=Object(b.a)(d.a.mark(function e(n){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(_,"/comments"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(t){return t.json()}).then(function(){return n(P())});case 2:return e.next=4,fetch("".concat(_,"/posts/").concat(t.postId,"?_embed=comments"),{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){return n(g(t))});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}(e))}}})(T),M=function(t){function e(){return Object(h.a)(this,e),Object(y.a)(this,Object(E.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(O.a)(e,[{key:"componentDidMount",value:function(){var t=Object(b.a)(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.props.payLoad(this.props.match.params.postId);case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.props.clearPostData()}},{key:"render",value:function(){var t=this.props.postData;return a.a.createElement(a.a.Fragment,null,0===t.length?a.a.createElement(C,null):a.a.createElement("div",{className:"post-wrap"},a.a.createElement("div",{className:"post"},a.a.createElement("div",{className:"post__date"},t.date),a.a.createElement("div",{className:"post__title"},t.title),a.a.createElement("div",{className:"post__body"},t.body),a.a.createElement(x,{comments:t.comments,postId:t.id}))))}}]),e}(a.a.Component),I=Object(i.b)(function(t){return{postData:t.post}},function(t){return{payLoad:function(e){return t(function(t){return function(){var e=Object(b.a)(d.a.mark(function e(n){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(_,"/posts/").concat(t,"?_embed=comments"),{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){return n(g(t))});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}(e))},clearPostData:function(){return t({type:"POST_CLEARED"})}}})(M);n(47),n(48);function F(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function A(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?F(n,!0).forEach(function(e){Object(D.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):F(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var L=function(t){function e(){var t,n;Object(h.a)(this,e);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(y.a)(this,(t=Object(E.a)(e)).call.apply(t,[this].concat(a)))).state={postMap:{title:n.props.postTitle||"",body:n.props.postBody,id:n.props.postId}},n.handleFieldChange=function(t){var e=t.target,r=e.name,a=e.value;n.setState(function(t){return{postMap:A({},t.postMap,Object(D.a)({},r,a))}})},n.handleFormSubmit=function(t){t.preventDefault();var e=n.state.postMap,r=n.props,a=r.onEdit,o=r.updatePost;a(),o(e)},n}return Object(v.a)(e,t),Object(O.a)(e,[{key:"render",value:function(){var t=this.state.postMap,e=t.title,n=t.body;return a.a.createElement("form",{className:"form-update"},a.a.createElement("input",{className:"form__input-update",id:"new-post-title",value:e,placeholder:"Write a title",name:"title",onChange:this.handleFieldChange}),a.a.createElement("textarea",{value:n,name:"body",placeholder:"Write a body",spellCheck:"true",onChange:this.handleFieldChange,className:"form__textarea"},n),a.a.createElement("button",{className:e&&n?"form__btn post__btn-update":"form__btn post__btn-update form__btn--disabled",type:"submit",disabled:!(e&&n),onClick:this.handleFormSubmit},"Update post"))}}]),e}(a.a.Component);L.defaultProps={postId:""};var R=Object(i.b)(null,function(t){return{updatePost:function(e){return t(function(t){return function(){var e=Object(b.a)(d.a.mark(function e(n){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(_,"/posts/").concat(t.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(t){return t.json()}).then(function(){return n(N())});case 2:return e.next=4,fetch("".concat(_,"/posts")).then(function(t){return t.json()}).then(function(t){return n(j(t))});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}(e))}}})(L),W=function(t){function e(){var t,n;Object(h.a)(this,e);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(y.a)(this,(t=Object(E.a)(e)).call.apply(t,[this].concat(a)))).state={isEditing:!1},n.onEdit=function(){n.setState(function(t){return{isEditing:!t.isEditing}})},n}return Object(v.a)(e,t),Object(O.a)(e,[{key:"render",value:function(){var t=this.props,e=t.post,n=t.deleteItem,r=this.state.isEditing;return a.a.createElement("div",{className:"post"},a.a.createElement("div",{className:"post__date"},e.date),a.a.createElement("div",{className:"post__title"},e.title),a.a.createElement("button",{type:"button",className:"post__btn-delete",title:"delete",onClick:function(){return n(e.id)}},"X"),a.a.createElement("div",{className:"post__body"},e.body),a.a.createElement("button",{type:"button",className:"form__btn post__btn-update",onClick:this.onEdit},r?"close edit":"edit post"),r&&a.a.createElement(R,{postId:e.id,onEdit:this.onEdit,postTitle:e.title,postBody:e.body}),a.a.createElement(s.b,{className:"post__link",to:"/".concat(e.id)},"Read the full post \xbb"))}}]),e}(a.a.Component),V=Object(i.b)(null,function(t){return{deleteItem:function(e){return t(function(t){return function(){var e=Object(b.a)(d.a.mark(function e(n){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(_,"/posts/").concat(t),{method:"DELETE",body:"form-data"}).then(function(){return n({type:"POST_DELETED"})});case 2:return e.next=4,fetch("".concat(_,"/posts"),{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){return n(j(t))});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}(e))}}})(W),J=(n(49),function(t){function e(){return Object(h.a)(this,e),Object(y.a)(this,Object(E.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(O.a)(e,[{key:"componentDidMount",value:function(){var t=Object(b.a)(d.a.mark(function t(){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.props.payLoad();case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this.props.posts;return a.a.createElement("div",{className:"posts-wrap"},a.a.createElement("div",{className:"posts"},t.map(function(t){return a.a.createElement(V,{post:t,key:t.id||Math.random()})})))}}]),e}(a.a.Component)),U=Object(i.b)(function(t){return{posts:t.posts}},function(t){return{payLoad:function(){return t(function(){var t=Object(b.a)(d.a.mark(function t(e){return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("".concat(_,"/posts")).then(function(t){return t.json()}).then(function(t){return e(j(t))});case 2:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}}})(J);n(50);function B(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function G(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?B(n,!0).forEach(function(e){Object(D.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):B(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var H=function(t){function e(){var t,n;Object(h.a)(this,e);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(n=Object(y.a)(this,(t=Object(E.a)(e)).call.apply(t,[this].concat(a)))).state={postMap:{title:"",body:"",id:0,date:(new Date).toISOString().slice(0,10)}},n.handleFieldChange=function(t){var e=t.target,r=e.name,a=e.value;n.setState(function(t){var e;return{postMap:G({},t.postMap,(e={},Object(D.a)(e,r,a),Object(D.a)(e,"id",n.props.numberOfPosts+1),e))}})},n.handleFormSubmit=function(t){t.preventDefault();var e=n.state.postMap;(0,n.props.addPost)(e),n.setState(function(t){return{postMap:G({},t.postMap,{title:"",body:"",id:n.props.numberOfPosts+1})}})},n}return Object(v.a)(e,t),Object(O.a)(e,[{key:"render",value:function(){var t=this.state.postMap,e=t.title,n=t.body;return a.a.createElement("div",{className:"form"},a.a.createElement("fieldset",{className:"form__fieldset"},a.a.createElement("div",{className:"form__title"},"Add a new post"),a.a.createElement("form",{className:"form__wrap"},a.a.createElement("input",{className:"form__input-update",id:"new-post-title",value:e,placeholder:"Write a title",name:"title",onChange:this.handleFieldChange}),a.a.createElement("textarea",{value:n,placeholder:"Write a body",name:"body",spellCheck:"true",onChange:this.handleFieldChange,className:"form__textarea"},n),a.a.createElement("button",{className:e&&n?"form__btn":"form__btn form__btn--disabled",type:"submit",onClick:this.handleFormSubmit,disabled:!(e&&n)},a.a.createElement(s.b,{to:"/",className:"form__btn-link"},"Add")))))}}]),e}(a.a.Component),X=Object(i.b)(function(t){return{numberOfPosts:t.posts.length}},function(t){return{addPost:function(e){return t(function(t){return function(){var e=Object(b.a)(d.a.mark(function e(n){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(_,"/posts"),{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)}).then(function(t){return t.json()}).then(function(t){return n(w(t))});case 2:return e.next=4,fetch("".concat(_,"/posts")).then(function(t){return t.json()}).then(function(t){return n(j(t))});case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}(e))}}})(H),q=function(){return a.a.createElement(m.c,null,a.a.createElement(m.a,{path:"/",exact:!0,component:U}),a.a.createElement(m.a,{path:"/new-post",exact:!0,component:X}),a.a.createElement(m.a,{path:"/:postId",exact:!0,render:function(t){var e=t.match;return a.a.createElement(I,{match:e})}}))};n(51);var z=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(l,null),a.a.createElement(q,null))};function K(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Q(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?K(n,!0).forEach(function(e){Object(D.a)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}var Y={posts:[],post:[],isLoaded:!1},Z=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"POSTS_RECEIVED":return Q({},t,{posts:e.posts,isLoaded:!0});case"POST_RECEIVED":return Q({},t,{post:e.post});case"NEW_POST_RECEIVED":case"NEW_COMMENT_RECEIVED":case"POST_DELETED":case"POST_UPDATED":return Q({},t);case"POST_CLEARED":return Q({},t,{post:[]});default:return t}},$=Object(u.c)(Z,Object(u.a)(p.a));c.a.render(a.a.createElement(s.a,null,a.a.createElement(i.a,{store:$},a.a.createElement(z,null))),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.486a2f3a.chunk.js.map